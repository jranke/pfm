<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Utilities for Pesticide Fate Modelling • pfm</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="jquery.sticky-kit.min.js"></script><script src="pkgdown.js"></script><!-- mathjax --><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">pfm</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="contents col-md-9">
    <div id="pfm" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#pfm" class="anchor"> </a>pfm</h1></div>
<p>The R package <strong>pfm</strong> provides some utilities for dealing with FOCUS pesticide fate modelling tools, (currently only TOXSWA cwa and out files), made available under the GNU public license. This means:</p>
<div class="sourceCode"><pre class="sourceCode R"><code class="sourceCode r">This program is free software:<span class="st"> </span>you can redistribute it and/or modify it under
the terms of the GNU General Public License as published by the Free Software
Foundation, either version <span class="dv">3</span> of the License, <span class="kw">or</span> (at your option) any later
version.

This program is distributed in the hope that it will be useful, but WITHOUT
ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more
details.

You should have received a copy of the GNU General Public License along with
this program. If not, see &lt;http:<span class="er">//</span>www.gnu.org/licenses/<span class="er">&gt;</span></code></pre></div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"> </a>Installation</h2>
<p>You can install the package from <a href="http://github.com/jranke/pfm">github</a>, e.g. using the <code>devtools</code> package. Using <code>quick = TRUE</code> skips docs, multiple-architecture builds, demos, and vignettes, to make installation as fast and painless as possible.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(devtools)
<span class="kw">install_github</span>(<span class="st">"jranke/pfm"</span>, <span class="dt">subdir =</span> <span class="st">"pkg"</span>, <span class="dt">quick =</span> <span class="ot">TRUE</span>)</code></pre></div>
</div>
<div id="use" class="section level2">
<h2 class="hasAnchor">
<a href="#use" class="anchor"> </a>Use</h2>
<div id="analyse-toxswa-output" class="section level3">
<h3 class="hasAnchor">
<a href="#analyse-toxswa-output" class="anchor"> </a>Analyse TOXSWA output</h3>
<p>Read in and analyse a cwa file:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(pfm, <span class="dt">quietly =</span> <span class="ot">TRUE</span>)</code></pre></div>
<pre><code>## 
## Initialize Python Version 2.7.9 (default, Jun 29 2016, 13:11:10) 
## [GCC 4.9.2]</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">example_cwa &lt;-<span class="st"> </span><span class="kw"><a href="reference/read.TOXSWA_cwa.html">read.TOXSWA_cwa</a></span>(<span class="st">"00003s_pa.cwa"</span>)
<span class="kw">plot</span>(example_cwa)</code></pre></div>
<p><img src="README_files/figure-html/unnamed-chunk-3-1.png" width="672"></p>
<p>Get events above thresholds of 20 and 100 µg/L, and do a moving window analysis for windows of 7 days and 21 days, print the results:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">example_cwa$<span class="kw">get_events</span>(<span class="kw">c</span>(<span class="dv">20</span>, <span class="dv">100</span>))
example_cwa$<span class="kw">moving_windows</span>(<span class="kw">c</span>(<span class="dv">7</span>, <span class="dv">21</span>))
<span class="kw">print</span>(example_cwa)</code></pre></div>
<pre><code>## &lt;TOXSWA_cwa&gt; data from file 00003s_pa.cwa segment 20 
##                datetime     t t_firstjan t_rel_to_max cwa_mug_per_L
## 20  1978-10-01 00:00:00 0.000   273.0000      -55.333             0
## 40  1978-10-01 01:00:00 0.042   273.0417      -55.291             0
## 60  1978-10-01 02:00:00 0.083   273.0833      -55.250             0
## 80  1978-10-01 03:00:00 0.125   273.1250      -55.208             0
## 100 1978-10-01 04:00:00 0.167   273.1667      -55.166             0
## 120 1978-10-01 05:00:00 0.208   273.2083      -55.125             0
##     cwa_tot_mug_per_L
## 20                  0
## 40                  0
## 60                  0
## 80                  0
## 100                 0
## 120                 0
## Moving window analysis
##    window  max_TWAC max_AUC_h max_AUC_d
## 1  7 days 2.3926551  401.9660  16.74859
## 2 21 days 0.8369248  421.8101  17.57542
## Event statistics for threshold 20 
##   t_start  cwa_max duration pre_interval    AUC_h   AUC_d
## 1  55.083 40.58401    0.417       55.083 365.7912 15.2413
## Event statistics for threshold 100 
## No events found</code></pre>
<p>This can also be done with out files, the function reads out files from current TOXSWA versions as well as cwa files from old TOXSWA versions.</p>
</div>
<div id="calculate-pec-soil" class="section level3">
<h3 class="hasAnchor">
<a href="#calculate-pec-soil" class="anchor"> </a>Calculate PEC soil</h3>
<p>Simple PEC soil calculation for an application rate of 100 g/ha and 25% interception, assuming complete mixing into 5 cm and a soil bulk density of 1.5 kg/L, output in mg/kg:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="reference/PEC_soil.html">PEC_soil</a></span>(<span class="dv">100</span>, <span class="dt">interception =</span> <span class="fl">0.25</span>)</code></pre></div>
<pre><code>##      scenario
## t_avg default
##     0     0.1</code></pre>
</div>
<div id="rautmann-drift-data" class="section level3">
<h3 class="hasAnchor">
<a href="#rautmann-drift-data" class="anchor"> </a>Rautmann drift data</h3>
<p>Some of the drift percentage data published by the JKI are included. To see the data for one application:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">drift_data_JKI[<span class="dv">1</span>]</code></pre></div>
<pre><code>## [[1]]
##         crop
## distance Ackerbau Obstbau frueh Obstbau spaet
##       1      2.77            NA            NA
##       3        NA         29.20         15.73
##       5      0.57         19.89          8.41
##       10     0.29         11.81          3.60
##       15     0.20          5.55          1.81
##       20     0.15          2.77          1.09
##       30     0.10          1.04          0.54
##       40     0.07          0.52          0.32
##       50     0.06          0.30          0.22</code></pre>
</div>
<div id="pec-surface-water-due-to-drift" class="section level3">
<h3 class="hasAnchor">
<a href="#pec-surface-water-due-to-drift" class="anchor"> </a>PEC surface water due to drift</h3>
<p>Initial PEC values for an application of 100 g/ha in the vicinity of a 30 cm deep water body are obtained using</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="reference/PEC_sw_drift.html">PEC_sw_drift</a></span>(<span class="dv">100</span>, <span class="dt">applications =</span> <span class="dv">1</span>)</code></pre></div>
<pre><code>##        1 m        5 m       10 m       20 m 
## 0.92333333 0.19000000 0.09666667 0.05000000</code></pre>
</div>
</div>
</div>
  </div>

  <div class="col-md-3" id="sidebar">
    <h2>License</h2>
<p>GPL</p>
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Johannes Ranke <br><small class="roles"> Author, maintainer, copyright holder </small> </li>
</ul>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Johannes Ranke.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
