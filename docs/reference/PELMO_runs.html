<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Set up runs for FOCUS PELMO — PELMO_runs • pfm</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
  
  
<meta property="og:title" content="Set up runs for FOCUS PELMO — PELMO_runs" />

<meta property="og:description" content="Per default, the runs are not only set up but also executed with FOCUS
PELMO, the results are processed and returned. Currently, only FOCUS PELMO
as installed on Linux (or other Unix systems)
using the install_PELMO from the PELMO.installeR package
maintained on github is supported. In such installations, FOCUS PELMO is
installed into the package installation directory of PELMO.installeR
and run using wine." />
<meta name="twitter:card" content="summary" />
<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">pfm</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Set up runs for FOCUS PELMO</h1>
    </div>

    
    <p>Per default, the runs are not only set up but also executed with FOCUS
PELMO, the results are processed and returned. Currently, only FOCUS PELMO
as installed on Linux (or other Unix systems)
using the <code>install_PELMO</code> from the <code>PELMO.installeR</code> package
maintained on github is supported. In such installations, FOCUS PELMO is
installed into the package installation directory of <code>PELMO.installeR</code>
and run using <code>wine</code>.</p>
    

    <pre class="usage"><span class='fu'>PELMO_runs</span>(<span class='no'>runs</span>, <span class='kw'>psm_dir</span> <span class='kw'>=</span> <span class='st'>"."</span>, <span class='kw'>version</span> <span class='kw'>=</span> <span class='st'>"5.5.3"</span>, <span class='kw'>PELMO_base</span> <span class='kw'>=</span> <span class='st'>"auto"</span>,
  <span class='kw'>execute</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>cores</span> <span class='kw'>=</span> <span class='fu'>getOption</span>(<span class='st'>"mc.cores"</span>, <span class='fl'>2L</span>), <span class='kw'>evaluate</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>overwrite</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)

<span class='fu'>run_PELMO</span>(<span class='no'>runs</span>, <span class='kw'>version</span> <span class='kw'>=</span> <span class='st'>"5.5.3"</span>, <span class='kw'>PELMO_base</span> <span class='kw'>=</span> <span class='st'>"auto"</span>,
  <span class='kw'>cores</span> <span class='kw'>=</span> <span class='fu'>getOption</span>(<span class='st'>"mc.cores"</span>, <span class='fl'>2L</span>))

<span class='fu'>evaluate_PELMO</span>(<span class='no'>runs</span>, <span class='kw'>version</span> <span class='kw'>=</span> <span class='st'>"5.5.3"</span>, <span class='kw'>PELMO_base</span> <span class='kw'>=</span> <span class='st'>"auto"</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>runs</th>
      <td><p>A list of lists. Each inner lists has an element named 'psm'
that holds the psm string, and elements named using three letter crop acronyms,
as used in <code><a href='FOCUS_PELMO_crops.html'>FOCUS_PELMO_crops</a></code>,
that hold character vectors of three letter scenario acronyms
as used in <code><a href='FOCUS_GW_scenarios_2012.html'>FOCUS_GW_scenarios_2012</a></code>.</p></td>
    </tr>
    <tr>
      <th>psm_dir</th>
      <td><p>The directory where the psm files are located</p></td>
    </tr>
    <tr>
      <th>version</th>
      <td><p>The FOCUS PELMO version</p></td>
    </tr>
    <tr>
      <th>PELMO_base</th>
      <td><p>Where the FOCUS PELMO installation is located</p></td>
    </tr>
    <tr>
      <th>execute</th>
      <td><p>Should PELMO be executed directly?</p></td>
    </tr>
    <tr>
      <th>cores</th>
      <td><p>The number of cores to execute PELMO runs in parallel</p></td>
    </tr>
    <tr>
      <th>evaluate</th>
      <td><p>Should the results be returned?</p></td>
    </tr>
    <tr>
      <th>overwrite</th>
      <td><p>Should existing run directories be overwritten?</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>If evaluate is TRUE, a list of lists of matrices holding the
  PEC data.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>As a side effect, an R data file (period_pfm.rda) is generated in each
run directory, holding the results for all FOCUS periods, equivalent to
the period.plm file generated by the FOCUS PELMO GUI.</p>
    
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>PELMO.installeR <a href='https://pkgdown.jrwb.de/PELMO.installeR'>https://pkgdown.jrwb.de/PELMO.installeR</a></p>
<p>Wine <a href='https://winehq.org'>https://winehq.org</a></p>
<p>PELMO test results <a href='http://esdac.jrc.ec.europa.eu/public_path/projects_data/focus/gw/models/pelmo/test-results/test_results_FOCUS_PELMO_5_5_3.doc'>http://esdac.jrc.ec.europa.eu/public_path/projects_data/focus/gw/models/pelmo/test-results/test_results_FOCUS_PELMO_5_5_3.doc</a></p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># Reproduce the official test results for annual application of Pesticide D</span>
<span class='co'># to winter cereals at the day before emergence</span>
<span class='no'>runs_1</span> <span class='kw'>&lt;-</span> <span class='fu'>list</span>(
  <span class='fu'>list</span>(<span class='kw'>psm</span> <span class='kw'>=</span> <span class='st'>'Pesticide_D'</span>,
       <span class='kw'>win</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"Cha"</span>, <span class='st'>"Ham"</span>, <span class='st'>"Jok"</span>, <span class='st'>"Kre"</span>, <span class='st'>"Oke"</span>, <span class='st'>"Pia"</span>, <span class='st'>"Por"</span>, <span class='st'>"Sev"</span>, <span class='st'>"Thi"</span>)),
  <span class='fu'>list</span>(<span class='kw'>psm</span> <span class='kw'>=</span> <span class='st'>'Pesticide_D_1_day_pre_em_every_third_year'</span>,
       <span class='kw'>pot</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"Cha"</span>, <span class='st'>"Ham"</span>, <span class='st'>"Jok"</span>, <span class='st'>"Kre"</span>, <span class='st'>"Oke"</span>, <span class='st'>"Pia"</span>, <span class='st'>"Por"</span>, <span class='st'>"Sev"</span>, <span class='st'>"Thi"</span>)))
<span class='no'>time_1</span> <span class='kw'>&lt;-</span> <span class='fu'>system.time</span>(
  <span class='no'>PECgw_1</span> <span class='kw'>&lt;-</span> <span class='fu'>PELMO_runs</span>(<span class='no'>runs_1</span>, <span class='kw'>psm_dir</span> <span class='kw'>=</span> <span class='fu'>system.file</span>(<span class='st'>"testdata"</span>, <span class='kw'>package</span> <span class='kw'>=</span> <span class='st'>"pfm"</span>),
    <span class='kw'>cores</span> <span class='kw'>=</span> <span class='fl'>15</span>, <span class='kw'>overwrite</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)
)
<span class='fu'>print</span>(<span class='no'>PECgw_1</span>)</div><div class='output co'>#&gt; $Pesticide_D
#&gt; $Pesticide_D$win
#&gt;     FOCUS DUMMY D
#&gt; Cha         0.025
#&gt; Ham         1.621
#&gt; Jok         0.388
#&gt; Kre         0.467
#&gt; Oke         1.608
#&gt; Pia         0.848
#&gt; Por         2.386
#&gt; Sev         0.009
#&gt; Thi         0.030
#&gt; 
#&gt; 
#&gt; $Pesticide_D_1_day_pre_em_every_third_year
#&gt; $Pesticide_D_1_day_pre_em_every_third_year$pot
#&gt;     FOCUS DUMMY D
#&gt; Cha         0.010
#&gt; Ham         0.014
#&gt; Jok         0.009
#&gt; Kre         0.027
#&gt; Oke         0.085
#&gt; Pia         0.051
#&gt; Por         0.021
#&gt; Sev         0.000
#&gt; Thi         0.001
#&gt; 
#&gt; </div><div class='input'><span class='co'># We get exactly the same PECgw values (on Linux, calling PELMO using Wine).</span>
<span class='fu'>print</span>(<span class='no'>time_1</span>)</div><div class='output co'>#&gt;        User      System verstrichen 
#&gt;     220.760       1.509      30.234 </div><div class='input'><span class='kw'>if</span>(!<span class='fu'>inherits</span>(<span class='fu'>try</span>(<span class='no'>cpuinfo</span> <span class='kw'>&lt;-</span> <span class='fu'>readLines</span>(<span class='st'>"/proc/cpuinfo"</span>)), <span class='st'>"try-error"</span>)) {
  <span class='fu'>cat</span>(<span class='fu'>gsub</span>(<span class='st'>"model name\t: "</span>, <span class='st'>"CPU model: "</span>, <span class='no'>cpuinfo</span>[<span class='fu'>grep</span>(<span class='st'>"model name"</span>, <span class='no'>cpuinfo</span>)[<span class='fl'>1</span>]]))
}</div><div class='output co'>#&gt; CPU model: AMD Ryzen 7 1700 Eight-Core Processor</div><div class='input'>
<span class='co'># Demonstrate some results with metabolites.</span>
<span class='no'>runs_2</span> <span class='kw'>&lt;-</span> <span class='fu'>list</span>(<span class='fu'>list</span>(<span class='kw'>psm</span> <span class='kw'>=</span> <span class='st'>'Pesticide_D_1_May_every_other_year_mets'</span>,
                    <span class='kw'>win</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"Cha"</span>, <span class='st'>"Ham"</span>, <span class='st'>"Kre"</span>)))
<span class='no'>PECgw_2</span> <span class='kw'>&lt;-</span> <span class='fu'>PELMO_runs</span>(<span class='no'>runs_2</span>, <span class='kw'>psm_dir</span> <span class='kw'>=</span> <span class='fu'>system.file</span>(<span class='st'>"testdata"</span>, <span class='kw'>package</span> <span class='kw'>=</span> <span class='st'>"pfm"</span>),
  <span class='kw'>cores</span> <span class='kw'>=</span> <span class='fl'>3</span>, <span class='kw'>overwrite</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)
<span class='fu'>print</span>(<span class='no'>PECgw_2</span>)</div><div class='output co'>#&gt; $Pesticide_D_1_May_every_other_year_mets
#&gt; $Pesticide_D_1_May_every_other_year_mets$win
#&gt;     FOCUS DUMMY D      M1    M2
#&gt; Cha         0.001 126.195 0.000
#&gt; Ham         0.054  82.196 0.001
#&gt; Kre         0.103  75.494 0.001
#&gt; 
#&gt; </div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#references">References</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Johannes Ranke.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
