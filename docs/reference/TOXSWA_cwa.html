<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>R6 class for holding TOXSWA water concentration data and associated statistics — TOXSWA_cwa • pfm</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="R6 class for holding TOXSWA water concentration data and associated statistics — TOXSWA_cwa"><meta property="og:description" content="An R6 class for holding TOXSWA water concentration (cwa) data
and some associated statistics.  like maximum moving window average
concentrations, and dataframes holding the events exceeding specified
thresholds.  Usually, an instance of this class will be generated
by read.TOXSWA_cwa."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">pfm</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.6.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>R6 class for holding TOXSWA water concentration data and associated statistics</h1>
    
    <div class="hidden name"><code>TOXSWA_cwa.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>An R6 class for holding TOXSWA water concentration (cwa) data
and some associated statistics.  like maximum moving window average
concentrations, and dataframes holding the events exceeding specified
thresholds.  Usually, an instance of this class will be generated
by <code><a href="read.TOXSWA_cwa.html">read.TOXSWA_cwa</a></code>.</p>
    </div>


    <div id="format">
    <h2>Format</h2>
    <p>An <code>R6Class</code> generator object.</p>
    </div>
    <div id="public-fields">
    <h2>Public fields</h2>
    <p></p><div class="r6-fields"><dl><dt><code>filename</code></dt>
<dd><p>Length one character vector holding the filename.</p></dd>


<dt><code>basedir</code></dt>
<dd><p>Length one character vector holding the directory where the file came from.</p></dd>


<dt><code>zipfile</code></dt>
<dd><p>If not null, giving the path to the zip file from which the file was read.</p></dd>


<dt><code>segment</code></dt>
<dd><p>Length one integer, specifying for which segment the cwa data were read.</p></dd>


<dt><code>substance</code></dt>
<dd><p>The TOXSWA name of the substance.</p></dd>


<dt><code>cwas</code></dt>
<dd><p>Dataframe holding the concentrations.</p></dd>


<dt><code>events</code></dt>
<dd><p>List of dataframes holding the event statistics for each threshold.</p></dd>


<dt><code>windows</code></dt>
<dd><p>Matrix of maximum time weighted average concentrations (TWAC_max)
and areas under the curve in µg/day * h (AUC_max_h) or µg/day * d (AUC_max_d)
for the requested moving window sizes in days.</p></dd>


</dl><p></p></div>
    </div>
    <div id="methods">
    <h2>Methods</h2>
    
<div class="section">
<h3 id="public-methods">Public methods<a class="anchor" aria-label="anchor" href="#public-methods"></a></h3>

<ul><li><p><a href="#method-TOXSWA_cwa-new"><code>TOXSWA_cwa$new()</code></a></p></li>
<li><p><a href="#method-TOXSWA_cwa-moving_windows"><code>TOXSWA_cwa$moving_windows()</code></a></p></li>
<li><p><a href="#method-TOXSWA_cwa-get_events"><code>TOXSWA_cwa$get_events()</code></a></p></li>
<li><p><a href="#method-TOXSWA_cwa-print"><code>TOXSWA_cwa$print()</code></a></p></li>
<li><p><a href="#method-TOXSWA_cwa-clone"><code>TOXSWA_cwa$clone()</code></a></p></li>
</ul></div><p></p><hr><a id="method-TOXSWA_cwa-new"></a><div class="section">
<h3 id="method-new-">Method <code>new()</code><a class="anchor" aria-label="anchor" href="#method-new-"></a></h3>
<p>Create a TOXSWA_cwa object from a file</p><div class="section">
<h4 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va"><a href="../reference/TOXSWA_cwa.html">TOXSWA_cwa</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span></span>
<span>  <span class="va">filename</span>,</span>
<span>  <span class="va">basedir</span>,</span>
<span>  zipfile <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  segment <span class="op">=</span> <span class="st">"last"</span>,</span>
<span>  substance <span class="op">=</span> <span class="st">"parent"</span>,</span>
<span>  total <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h4>
<p></p><div class="arguments"><dl><dt><code>filename</code></dt>
<dd><p>The filename</p></dd>


<dt><code>basedir</code></dt>
<dd><p>The directory to look in</p></dd>


<dt><code>zipfile</code></dt>
<dd><p>Optional path to a zipfile holding the file</p></dd>


<dt><code>segment</code></dt>
<dd><p>Either "last" or the number of the segment for which to read the data</p></dd>


<dt><code>substance</code></dt>
<dd><p>The TOXSWA substance name (for TOXSWA 4 or higher)</p></dd>


<dt><code>total</code></dt>
<dd><p>Should total concentrations be read in? If FALSE, free concentrations are read</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-TOXSWA_cwa-moving_windows"></a><div class="section">
<h3 id="method-moving-windows-">Method <code>moving_windows()</code><a class="anchor" aria-label="anchor" href="#method-moving-windows-"></a></h3>
<p>Add to the `windows` field described above.</p><div class="section">
<h4 id="usage-1">Usage<a class="anchor" aria-label="anchor" href="#usage-1"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">TOXSWA_cwa</span><span class="op">$</span><span class="fu">moving_windows</span><span class="op">(</span><span class="va">windows</span>, total <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-1">Arguments<a class="anchor" aria-label="anchor" href="#arguments-1"></a></h4>
<p></p><div class="arguments"><dl><dt><code>windows</code></dt>
<dd><p>Window sizes in days</p></dd>


<dt><code>total</code></dt>
<dd><p>If TRUE, the total concentration including the amount adsorbed to
suspended matter will be used.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-TOXSWA_cwa-get_events"></a><div class="section">
<h3 id="method-get-events-">Method <code>get_events()</code><a class="anchor" aria-label="anchor" href="#method-get-events-"></a></h3>
<p>Populate a datataframe with event information for the specified
threshold value.  The resulting dataframe is stored in the `events`
field of the object.</p><div class="section">
<h4 id="usage-2">Usage<a class="anchor" aria-label="anchor" href="#usage-2"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">TOXSWA_cwa</span><span class="op">$</span><span class="fu">get_events</span><span class="op">(</span><span class="va">thresholds</span>, total <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-2">Arguments<a class="anchor" aria-label="anchor" href="#arguments-2"></a></h4>
<p></p><div class="arguments"><dl><dt><code>thresholds</code></dt>
<dd><p>Threshold values in µg/L.</p></dd>


<dt><code>total</code></dt>
<dd><p>If TRUE, the total concentration including the amount adsorbed to
suspended matter will be used.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-TOXSWA_cwa-print"></a><div class="section">
<h3 id="method-print-">Method <code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code><a class="anchor" aria-label="anchor" href="#method-print-"></a></h3>
<p>Print a `TOXSWA_cwa` object</p><div class="section">
<h4 id="usage-3">Usage<a class="anchor" aria-label="anchor" href="#usage-3"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">TOXSWA_cwa</span><span class="op">$</span><span class="fu">print</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-TOXSWA_cwa-clone"></a><div class="section">
<h3 id="method-clone-">Method <code>clone()</code><a class="anchor" aria-label="anchor" href="#method-clone-"></a></h3>
<p>The objects of this class are cloneable with this method.</p><div class="section">
<h4 id="usage-4">Usage<a class="anchor" aria-label="anchor" href="#usage-4"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">TOXSWA_cwa</span><span class="op">$</span><span class="fu">clone</span><span class="op">(</span>deep <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-3">Arguments<a class="anchor" aria-label="anchor" href="#arguments-3"></a></h4>
<p></p><div class="arguments"><dl><dt><code>deep</code></dt>
<dd><p>Whether to make a deep clone.</p></dd>


</dl><p></p></div>
</div>

</div>

    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">H_sw_R1_stream</span>  <span class="op">&lt;-</span> <span class="fu"><a href="read.TOXSWA_cwa.html">read.TOXSWA_cwa</a></span><span class="op">(</span><span class="st">"00003s_pa.cwa"</span>,</span></span>
<span class="r-in"><span>                                 basedir <span class="op">=</span> <span class="st">"SwashProjects/project_H_sw/TOXSWA"</span>,</span></span>
<span class="r-in"><span>                                 zipfile <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"testdata/SwashProjects.zip"</span>,</span></span>
<span class="r-in"><span>                                             package <span class="op">=</span> <span class="st">"pfm"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">H_sw_R1_stream</span><span class="op">$</span><span class="fu">get_events</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">10</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">H_sw_R1_stream</span><span class="op">$</span><span class="fu">moving_windows</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">7</span>, <span class="fl">21</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">H_sw_R1_stream</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;TOXSWA_cwa&gt; data from file 00003s_pa.cwa segment 20 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                datetime     t t_firstjan t_rel_to_max cwa_mug_per_L</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20  1978-10-01 00:00:00 0.000   273.0000      -55.333             0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 40  1978-10-01 01:00:00 0.042   273.0417      -55.291             0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 60  1978-10-01 02:00:00 0.083   273.0833      -55.250             0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 80  1978-10-01 03:00:00 0.125   273.1250      -55.208             0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 100 1978-10-01 04:00:00 0.167   273.1667      -55.166             0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 120 1978-10-01 05:00:00 0.208   273.2083      -55.125             0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     cwa_tot_mug_per_L</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20                  0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 40                  0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 60                  0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 80                  0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 100                 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 120                 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Moving window analysis</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    window  max_TWAC max_AUC_h max_AUC_d</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  7 days 2.3926551  401.9660  16.74859</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 21 days 0.8369248  421.8101  17.57542</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Event statistics for threshold 2 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   t_start   cwa_max duration pre_interval     AUC_h     AUC_d</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  44.375  4.167238    0.208       44.375  17.77202  0.740501</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  55.042 40.584010    0.583       10.459 398.21189 16.592162</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Event statistics for threshold 10 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   t_start  cwa_max duration pre_interval   AUC_h    AUC_d</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  55.083 40.58401    0.459       55.083 379.433 15.80971</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Johannes Ranke.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

